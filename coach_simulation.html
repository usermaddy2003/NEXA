<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Process Coach - Live Simulation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .tagline {
            font-size: 1.3em;
            color: #a0aec0;
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .work-area {
            background: #1a1a1a;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        
        .coach-panel {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(102, 126, 234, 0.4);
            position: relative;
        }
        
        .coach-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255,255,255,0.2);
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            background: #48bb78;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .coach-message {
            background: rgba(255,255,255,0.15);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #ffd93d;
            animation: slideIn 0.5s;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(20px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .coach-message.milestone {
            border-left-color: #48bb78;
            background: rgba(72, 187, 120, 0.2);
        }
        
        .coach-message.warning {
            border-left-color: #f56565;
            background: rgba(245, 101, 101, 0.2);
        }
        
        .code-editor {
            background: #0d1117;
            border-radius: 8px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #58a6ff;
            margin-bottom: 20px;
            min-height: 300px;
            position: relative;
        }
        
        .file-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .file-tab {
            padding: 8px 16px;
            background: #21262d;
            border-radius: 6px 6px 0 0;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .file-tab.active {
            background: #0d1117;
        }
        
        .file-tab:hover {
            background: #30363d;
        }
        
        .code-line {
            padding: 2px 0;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: #2d3748;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            color: #a0aec0;
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        .timeline {
            background: #2d3748;
            padding: 20px;
            border-radius: 12px;
        }
        
        .timeline-item {
            display: flex;
            gap: 15px;
            margin: 15px 0;
            padding: 15px;
            background: #1a202c;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .timeline-icon {
            font-size: 1.5em;
            min-width: 30px;
        }
        
        .timeline-content {
            flex: 1;
        }
        
        .timeline-time {
            color: #718096;
            font-size: 0.85em;
        }
        
        .momentum-indicator {
            width: 100%;
            height: 40px;
            background: #1a202c;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .momentum-bar {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            transition: width 1s ease;
            display: flex;
            align-items: center;
            padding-left: 15px;
            font-weight: bold;
        }
        
        .control-panel {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #4a5568;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #2d3748;
        }
        
        .phase-badge {
            display: inline-block;
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ AI Process Coach</h1>
            <p class="tagline">Watch it guide you through a realistic work session</p>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="timeElapsed">0:00</div>
                <div class="stat-label">Time Elapsed</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="filesEdited">0</div>
                <div class="stat-label">Files Edited</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="coachInterventions">0</div>
                <div class="stat-label">Coach Interventions</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="currentPhase">Planning</div>
                <div class="stat-label">Current Phase</div>
            </div>
        </div>
        
        <div class="main-grid">
            <div class="work-area">
                <h2 style="margin-bottom: 15px;">Your Work Area</h2>
                
                <div class="file-tabs" id="fileTabs">
                    <div class="file-tab active">controller.py</div>
                </div>
                
                <div class="code-editor" id="codeEditor">
                    <div class="code-line"># Starting your work session...</div>
                </div>
                
                <div class="momentum-indicator">
                    <div class="momentum-bar" id="momentumBar" style="width: 20%;">
                        <span id="momentumText">Starting</span>
                    </div>
                </div>
                
                <div class="timeline" id="timeline">
                    <h3 style="margin-bottom: 15px;">Activity Timeline</h3>
                </div>
            </div>
            
            <div class="coach-panel">
                <div class="coach-status">
                    <div class="status-indicator"></div>
                    <h2>AI Coach Active</h2>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <strong>Your Goal:</strong>
                    <div style="margin-top: 5px; opacity: 0.9;">Build a PID controller for robot navigation</div>
                </div>
                
                <div id="coachMessages">
                    <div class="coach-message">
                        üëã Welcome! I'm watching your work and will guide you toward the best outcome. Just work naturally - I'll speak up when helpful.
                    </div>
                </div>
            </div>
        </div>
        
        <div class="control-panel">
            <button class="btn btn-primary" onclick="startSimulation()">‚ñ∂ Start Simulation</button>
            <button class="btn btn-secondary" onclick="resetSimulation()">üîÑ Reset</button>
            <button class="btn btn-secondary" onclick="skipAhead()">‚è© Skip Ahead</button>
        </div>
    </div>
    
    <script>
        let simulationRunning = false;
        let timeElapsed = 0;
        let currentStep = 0;
        
        const workScenario = [
            { time: 5, action: 'createFile', file: 'README.md', phase: 'Planning', momentum: 30, 
              code: '# PID Controller\n## Project Goal\nBuild a PID controller for robot navigation',
              timeline: 'Created project structure',
              coach: null },
            
            { time: 10, action: 'createFile', file: 'controller.py', phase: 'Planning', momentum: 40,
              code: 'class PIDController:\n    def __init__(self):\n        pass',
              timeline: 'Started main controller file',
              coach: 'üí° Good start! Focus on the core PID calculation first. Break it into P, I, and D components.' },
            
            { time: 20, action: 'edit', file: 'controller.py', phase: 'Implementation', momentum: 60,
              code: 'class PIDController:\n    def __init__(self, kp, ki, kd):\n        self.kp = kp\n        self.ki = ki\n        self.kd = kd\n        self.prev_error = 0\n        self.integral = 0',
              timeline: 'Implementing PID logic',
              coach: null },
            
            { time: 30, action: 'edit', file: 'controller.py', phase: 'Implementation', momentum: 75,
              code: 'def calculate(self, setpoint, measured, dt):\n    error = setpoint - measured\n    P = self.kp * error\n    self.integral += error * dt\n    I = self.ki * self.integral\n    D = self.kd * (error - self.prev_error) / dt\n    return P + I + D',
              timeline: 'Core PID calculation complete',
              coach: null },
            
            { time: 45, action: 'edit', file: 'controller.py', phase: 'Implementation', momentum: 65,
              code: '# Stuck on derivative term...\n# Multiple attempts at fixing dt=0 issue',
              timeline: 'Rapid edits - potential issue',
              coach: null },
            
            { time: 52, action: 'stuck', file: 'controller.py', phase: 'Debugging', momentum: 40,
              code: '# Still struggling with derivative',
              timeline: 'Stuck for 7 minutes',
              coach: 'üéØ I notice you might be stuck on the derivative term. The issue is dt=0 on first call. Try:\n\nif dt == 0:\n    derivative = 0\nelse:\n    derivative = (error - self.prev_error) / dt\n\nThis prevents division by zero!' },
            
            { time: 60, action: 'edit', file: 'controller.py', phase: 'Implementation', momentum: 70,
              code: 'if dt == 0:\n    D = 0\nelse:\n    D = self.kd * (error - self.prev_error) / dt',
              timeline: 'Fixed derivative calculation',
              coach: null },
            
            { time: 70, action: 'createFile', file: 'test_controller.py', phase: 'Testing', momentum: 85,
              code: 'import unittest\nfrom controller import PIDController\n\nclass TestPID(unittest.TestCase):\n    def test_step_response(self):\n        pid = PIDController(1.0, 0.1, 0.05)',
              timeline: 'Created test file',
              coach: 'üéâ Excellent! Tests are crucial. Run them now to validate the controller logic, then tune Kp, Ki, Kd for optimal response.' },
            
            { time: 85, action: 'edit', file: 'visualization.py', phase: 'Testing', momentum: 60,
              code: 'import matplotlib.pyplot as plt\n# Starting visualization',
              timeline: 'Working on visualization',
              coach: '‚ö†Ô∏è Hold on - I see you\'re adding visualization. That\'s useful, but your PID controller isn\'t fully tested yet. Let\'s validate the core functionality first, then add nice-to-haves.' },
            
            { time: 95, action: 'edit', file: 'test_controller.py', phase: 'Testing', momentum: 80,
              code: 'def test_step_response(self):\n    # Testing complete\n    assert overshoot < 0.1\n    assert settling_time < 2.0',
              timeline: 'Tests passing',
              coach: 'üéâ MILESTONE ACHIEVED! Tests are passing. Your PID controller is working! Next: fine-tune the gains or integrate with your robot.' },
        ];
        
        function startSimulation() {
            if (simulationRunning) return;
            simulationRunning = true;
            currentStep = 0;
            runNextStep();
        }
        
        function runNextStep() {
            if (!simulationRunning || currentStep >= workScenario.length) {
                simulationRunning = false;
                return;
            }
            
            const step = workScenario[currentStep];
            const delay = currentStep === 0 ? 0 : (workScenario[currentStep].time - workScenario[currentStep-1].time) * 1000;
            
            setTimeout(() => {
                executeStep(step);
                currentStep++;
                runNextStep();
            }, delay);
        }
        
        function executeStep(step) {
            // Update time
            timeElapsed = step.time;
            document.getElementById('timeElapsed').textContent = 
                Math.floor(timeElapsed / 60) + ':' + (timeElapsed % 60).toString().padStart(2, '0');
            
            // Update phase
            document.getElementById('currentPhase').textContent = step.phase;
            
            // Update momentum
            const momentumBar = document.getElementById('momentumBar');
            momentumBar.style.width = step.momentum + '%';
            
            let momentumText = 'Starting';
            if (step.momentum > 70) momentumText = 'Flowing üî•';
            else if (step.momentum > 50) momentumText = 'Working';
            else if (step.momentum < 40) momentumText = 'Stuck ü§î';
            document.getElementById('momentumText').textContent = momentumText;
            
            // Update code editor
            if (step.action === 'createFile') {
                document.getElementById('filesEdited').textContent = 
                    parseInt(document.getElementById('filesEdited').textContent) + 1;
                
                const tabs = document.getElementById('fileTabs');
                tabs.innerHTML = '';
                const tab = document.createElement('div');
                tab.className = 'file-tab active';
                tab.textContent = step.file;
                tabs.appendChild(tab);
            }
            
            const editor = document.getElementById('codeEditor');
            editor.innerHTML = '';
            step.code.split('\n').forEach(line => {
                const div = document.createElement('div');
                div.className = 'code-line';
                div.textContent = line;
                editor.appendChild(div);
            });
            
            // Add timeline item
            const timeline = document.getElementById('timeline');
            const item = document.createElement('div');
            item.className = 'timeline-item';
            item.innerHTML = `
                <div class="timeline-icon">${step.action === 'createFile' ? '‚ú®' : 'üìù'}</div>
                <div class="timeline-content">
                    <div><strong>${step.timeline}</strong></div>
                    <div class="timeline-time">${Math.floor(step.time / 60)}m ${step.time % 60}s ago</div>
                </div>
            `;
            timeline.insertBefore(item, timeline.children[1] || null);
            
            // Coach intervention
            if (step.coach) {
                const messages = document.getElementById('coachMessages');
                const msg = document.createElement('div');
                msg.className = step.action === 'stuck' ? 'coach-message warning' : 
                               step.timeline.includes('MILESTONE') ? 'coach-message milestone' : 
                               'coach-message';
                msg.textContent = step.coach;
                messages.appendChild(msg);
                
                document.getElementById('coachInterventions').textContent = 
                    parseInt(document.getElementById('coachInterventions').textContent) + 1;
                
                // Scroll to bottom
                messages.scrollTop = messages.scrollHeight;
            }
        }
        
        function skipAhead() {
            if (!simulationRunning) return;
            currentStep = Math.min(currentStep + 3, workScenario.length - 1);
        }
        
        function resetSimulation() {
            simulationRunning = false;
            currentStep = 0;
            timeElapsed = 0;
            
            document.getElementById('timeElapsed').textContent = '0:00';
            document.getElementById('filesEdited').textContent = '0';
            document.getElementById('coachInterventions').textContent = '0';
            document.getElementById('currentPhase').textContent = 'Planning';
            
            document.getElementById('momentumBar').style.width = '20%';
            document.getElementById('momentumText').textContent = 'Starting';
            
            document.getElementById('codeEditor').innerHTML = '<div class="code-line"># Starting your work session...</div>';
            
            document.getElementById('timeline').innerHTML = '<h3 style="margin-bottom: 15px;">Activity Timeline</h3>';
            
            document.getElementById('coachMessages').innerHTML = `
                <div class="coach-message">
                    üëã Welcome! I'm watching your work and will guide you toward the best outcome. Just work naturally - I'll speak up when helpful.
                </div>
            `;
        }
    </script>
</body>
</html>
